@use '@carbon/react/scss/spacing' as *;
@use '../../../mixins/text-mixins' as *;
@use '../../../mixins/glass-background' as *;
@use 'helper-mixins' as *;

@import 'nav-links.scss';

.minimalist-sidebar {
	// defined in layouts to ensure smoother animations
	width: var(--sidebar-width);
	display: flex;
	@include sidebar-element-alignments();
	@include text();
	@include glass-background();
	border: 1.25px solid var(--background-neutral);

	.page-links {
		height: 50%;
	}

	.top-section {
		display: flex;
		align-items: center;
		justify-content: center;
		column-gap: $spacing-06;
		min-height: 20%;
		min-width: 40%;
	}
}

/* header moves to top of page - change flex direction and simplify layout */
@media (max-width: 1056px) {
	.minimalist-sidebar {
		flex-direction: row-reverse;
		justify-content: flex-end;
		padding: $spacing-04 $spacing-06;
		width: 100%;

		.nav-links {
			opacity: 0;
			display: none;
		}
	}

	.minimalist-sidebar-active {
		// TODO: this
		z-index: 9999;

		position: fixed;
		width: 100%;
		height: 100%;

		// revert menu to use the column layout as used on the full-screen design
		@include sidebar-element-alignments();
		@include glass-background();
		// TODO: this
		// transition: backdrop-filter var(--sequence-fast);

		.top-section,
		.nav-links {
			@include menu-card();
		}

		.top-section {
			justify-content: space-between;
		}

		.nav-links {
			display: inherit;
			opacity: 1;
			// TODO: this
			transition: var(--sequence-slow) opacity linear;
		}

		.page-links {
			height: 50%;
		}
	}
}

/* toggling the sidebar-heading shifts the layout around - but only for larger screens */
@media (min-width: 1056px) {
	.minimalist-sidebar-active {
		animation: minimalist-sidebar-fade-in var(--sequence-fast) ease-out forwards;
		background-color: transparent;
		padding: 0 $spacing-04;

		.labelled-icon-btn,
		.labelled-icon-btn > span {
			animation: fade-in var(--sequence-slow);
		}

		.top-section,
		.nav-links {
			width: 100%;
			@include menu-card();
		}

		.top-section {
			justify-content: space-between;
		}
	}

	.minimalist-sidebar-inactive {
		animation: minimalist-sidebar-fade-out var(--sequence-fast) ease-out forwards;

		.icon-btn {
			animation: fade-in var(--sequence-slow);
		}
	}
}
